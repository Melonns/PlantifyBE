<!DOCTYPE html>
<html>
  <head>
    <title>Firebase Auth Tester</title>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth-compat.js"></script>
  </head>
  <body>
    <h2>Firebase Auth Tester (Email/Pass)</h2>

    <div style="margin-bottom: 20px">
      <label for="email">Email:</label><br />
      <input
        type="email"
        id="email"
        value="test@example.com"
        style="width: 300px"
      /><br />
      <label for="password">Password:</label><br />
      <input
        type="password"
        id="password"
        value="password123"
        style="width: 300px"
      /><br /><br />
      <button id="registerButton">1. Register User</button>
      <button id="loginButton">2. Login & Get Token</button>
    </div>

    <h3>Token Kamu (Berlaku 1 Jam):</h3>
    <textarea id="tokenArea" rows="10" cols="80" readonly></textarea>

    <script>
      // ======================================================
      // GANTI DENGAN KONFIGURASI DARI FIREBASE CONSOLE KAMU
      const firebaseConfig = {
        apiKey: "AIzaSyBKHgVP4pkiz-kAYO37tYU-JmJ4WKWeZKQ",
        authDomain: "plantify-44c1f.firebaseapp.com",
        projectId: "plantify-44c1f",
        storageBucket: "plantify-44c1f.firebasestorage.app",
        messagingSenderId: "485055878642",
        appId: "1:485055878642:web:2400f208dd4c91e7ec476b",
        measurementId: "G-37TD151QWG",
      };
      // ======================================================

      // Inisialisasi Firebase
      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();

      const emailInput = document.getElementById("email");
      const passwordInput = document.getElementById("password");
      const registerButton = document.getElementById("registerButton");
      const loginButton = document.getElementById("loginButton");
      const tokenArea = document.getElementById("tokenArea");

      // Tombol Register
      registerButton.onclick = () => {
        const email = emailInput.value;
        const password = passwordInput.value;
        auth
          .createUserWithEmailAndPassword(email, password)
          .then((userCredential) => {
            alert("Register Berhasil! UID: " + userCredential.user.uid);
            console.log("Register Berhasil:", userCredential.user);
          })
          .catch((error) => {
            alert("Register Gagal: " + error.message);
            console.error("Register Gagal:", error);
          });
      };

      // Tombol Login
      loginButton.onclick = () => {
        const email = emailInput.value;
        const password = passwordInput.value;
        auth
          .signInWithEmailAndPassword(email, password)
          .then((userCredential) => {
            // Login berhasil
            const user = userCredential.user;

            // MINTA ID TOKEN DARI USER
            user.getIdToken(true).then((idToken) => {
              console.log("TOKEN:", idToken);
              // Tampilkan token di layar
              tokenArea.value = idToken;
              alert("Login berhasil! Copy token dari text box.");
            });
          })
          .catch((error) => {
            alert("Login Gagal: " + error.message);
            console.error("Login Gagal:", error);
          });
      };
    </script>
  </body>
</html>

<!-- <script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script> -->
